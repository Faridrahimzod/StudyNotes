# Требования безопасности (Security NFR) для Study Notes

| ID     | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет |
|--------|----------|----------|---------------|--------------------|-----------|-----------|
| NFR-01 | Защита персональных данных | Шифрование личных заметок пользователей | AES-256 для данных в БД | Code review, тесты шифрования | database | High |
| NFR-02 | Аутентификация пользователей | Безопасное хранение паролей | Argon2id с t=3, m=64MB | Конфиг аутентификации + unit-тесты | auth | High |
| NFR-03 | Защита от brute-force | Ограничение попыток входа | Макс 5 попыток/минуту с IP | Логи + мониторинг запросов | auth | High |
| NFR-04 | Валидация входных данных | Защита от SQL-инъекций и XSS | 100% endpoint'ов используют валидацию Pydantic | Code review + security тесты | api | High |
| NFR-05 | HTTPS шифрование | Защита передаваемых данных | TLS 1.2+ для всех endpoint'ов | Конфиг сервера + SSL тесты | network | Medium |
| NFR-06 | Обработка ошибок | Безопасные сообщения об ошибках | Никаких деталей системы в ответах | Тесты error handling | api | Medium |
| NFR-07 | Мониторинг безопасности | Логирование security событий | 100% auth событий логируются | Аудит логов + алерты | monitoring | Medium |
| NFR-08 | Безопасность зависимостей | Отсутствие уязвимостей в пакетах | 0 Critical уязвимостей в зависимостях | CI/CD security scanning | dependencies | High |
| NFR-09 | Резервное копирование | Регулярное сохранение данных | Ежедневные бэкапы + тесты восстановления | Процедуры бэкапа | database | Medium |
| NFR-10 | Ограничение размера данных | Защита от DoS через большие запросы | Макс 10MB на запрос, 100 заметок/пользователь | Конфиг FastAPI + тесты | api | Low |
